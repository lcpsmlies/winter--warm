<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ğŸ‡ğŸ’–å—¨å’¯ï¼Œä½ çš„ç«‹å†¬ä¸“å±ç¥ç¦æ¥å•¦~ğŸ¤—ğŸ’•</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Comic Sans MS', 'Microsoft YaHei', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            color: #333;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px;
            overflow: hidden;
            position: relative;
            touch-action: manipulation;
        }
        
        .container {
            max-width: 800px;
            width: 100%;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            padding: 25px 20px;
            margin-top: 15px;
            position: relative;
            overflow: hidden;
            text-align: center;
            z-index: 10;
        }
        
        .header {
            margin-bottom: 20px;
        }
        
        h1 {
            color: #ff6b6b;
            font-size: 2rem;
            margin-bottom: 12px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            line-height: 1.3;
        }
        
        .greeting {
            font-size: 1.2rem;
            color: #555;
            margin-bottom: 8px;
            line-height: 1.4;
        }
        
        .subtitle {
            color: #777;
            font-size: 1rem;
            margin-bottom: 20px;
            line-height: 1.4;
        }
        
        .current-option {
            margin: 30px 0;
            min-height: 250px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .blind-dumplings {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin: 15px 0;
        }
        
        .blind-dumpling {
            width: 70px;
            height: 70px;
            background: #ff9a3c;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
            position: relative;
            overflow: hidden;
            touch-action: manipulation;
        }
        
        .blind-dumpling::before {
            content: "?";
            position: absolute;
            color: white;
            font-size: 1.8rem;
            font-weight: bold;
        }
        
        .blind-dumpling:active {
            transform: translateY(-5px) scale(1.05);
            background: #ff7b3c;
        }
        
        .blind-dumpling.opened {
            background: #ff6b6b;
            transform: scale(1.1);
            animation: bounce 0.5s ease;
        }
        
        @keyframes bounce {
            0%, 100% { transform: scale(1.1); }
            50% { transform: scale(1.2); }
        }
        
        .blessing-message {
            position: fixed;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(255, 255, 255, 0.9);
            z-index: 20;
            animation: floatRandom 6s linear forwards;
            pointer-events: none;
            white-space: nowrap;
            font-size: 1.6rem !important;
            padding: 8px 15px;
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.8);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        @keyframes floatRandom {
            0% {
                transform: translate(0, 0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translate(
                    calc((Math.random() - 0.5) * 200px - 100px), 
                    -100vh
                ) rotate(calc((Math.random() - 0.5) * 360deg));
                opacity: 0;
            }
        }
        
        .explosion {
            position: fixed;
            font-size: 3rem;
            animation: explode 1.5s ease-out forwards;
            z-index: 100;
            pointer-events: none;
        }
        
        @keyframes explode {
            0% { 
                transform: scale(0.5) rotate(0deg); 
                opacity: 1; 
            }
            50% { 
                transform: scale(2) rotate(180deg); 
                opacity: 0.8;
            }
            100% { 
                transform: scale(3) rotate(360deg); 
                opacity: 0; 
            }
        }
        
        .snowflake {
            position: fixed;
            color: #b3e0ff;
            font-size: 1.5rem;
            user-select: none;
            z-index: 5;
            animation: snowFall linear forwards;
            pointer-events: none;
            text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.5);
        }
        
        @keyframes snowFall {
            0% {
                transform: translateY(-10vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(110vh) rotate(360deg);
                opacity: 0;
            }
        }
        
        .warm-message {
            position: fixed;
            font-size: 1.5rem;
            color: #ff6b6b;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(255, 255, 255, 0.9);
            z-index: 15;
            animation: warmFloat 12s ease-in-out infinite;
            pointer-events: none;
            white-space: nowrap;
        }
        
        @keyframes warmFloat {
            0%, 100% {
                transform: translate(0, 0) rotate(0deg) scale(1);
                opacity: 0.8;
            }
            25% {
                transform: translate(30px, -40px) rotate(5deg) scale(1.1);
            }
            50% {
                transform: translate(-20px, -80px) rotate(-5deg) scale(0.9);
            }
            75% {
                transform: translate(15px, -120px) rotate(3deg) scale(1.05);
            }
        }
        
        .progress-bar {
            height: 8px;
            background: #f0f0f0;
            border-radius: 4px;
            margin: 15px 0;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(to right, #ff9a3c, #ff6b6b);
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .footer {
            margin-top: 20px;
            text-align: center;
            color: #777;
            font-style: italic;
            font-size: 0.9rem;
        }
        
        .heart {
            color: #ff6b6b;
            animation: heartbeat 1.5s infinite;
        }
        
        @keyframes heartbeat {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        
        .final-message {
            font-size: 1.2rem;
            line-height: 1.6;
            margin: 15px 0;
            padding: 15px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 12px;
            display: none;
            position: relative;
        }
        
        .big-heart-container {
            position: relative;
            width: 200px;
            height: 200px;
            margin: 0 auto 20px;
            display: none;
        }
        
        .small-heart {
            position: absolute;
            font-size: 1.8rem;
            color: #ff0000;
            animation: smallHeartbeat 2s infinite;
            text-shadow: 0 0 8px rgba(255, 0, 0, 0.5);
            z-index: 25;
        }
        
        @keyframes smallHeartbeat {
            0%, 100% { transform: scale(1); }
            25% { transform: scale(1.3); }
            50% { transform: scale(1.1); }
            75% { transform: scale(1.2); }
        }
        
        .quiz-container {
            margin: 15px 0;
        }
        
        .quiz-question {
            font-size: 1.1rem;
            margin-bottom: 15px;
            color: #555;
            line-height: 1.4;
        }
        
        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
            max-width: 100%;
            margin: 0 auto;
        }
        
        .quiz-option {
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            font-size: 1rem;
            text-align: left;
            touch-action: manipulation;
        }
        
        .quiz-option:active {
            background: rgba(255, 154, 60, 0.3);
            border-color: #ff9a3c;
            transform: translateX(5px);
        }
        
        .selected-dumplings {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin: 15px 0;
            flex-wrap: wrap;
        }
        
        .selected-dumpling {
            display: flex;
            flex-direction: column;
            align-items: center;
            animation: popIn 0.5s ease;
        }
        
        @keyframes popIn {
            0% { transform: scale(0); }
            80% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .selected-dumpling-icon {
            font-size: 2.2rem;
        }
        
        .selected-dumpling-name {
            font-size: 0.9rem;
            margin-top: 4px;
            color: #666;
        }
        
        .funny-message {
            font-size: 1.1rem;
            color: #ff6b6b;
            margin: 12px 0;
            font-style: italic;
            animation: funnyPulse 2s infinite;
            line-height: 1.4;
        }
        
        @keyframes funnyPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.03); }
        }
        
        .letter-container {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.98);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            z-index: 30;
            max-width: 90%;
            width: 400px;
            display: none;
            text-align: left;
            line-height: 1.5;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .letter-content {
            font-size: 1rem;
            color: #555;
        }
        
        .letter-signature {
            text-align: right;
            margin-top: 15px;
            font-style: italic;
            color: #ff6b6b;
        }
        
        .close-letter {
            position: absolute;
            top: 8px;
            right: 12px;
            font-size: 1.3rem;
            cursor: pointer;
            color: #ff6b6b;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            touch-action: manipulation;
        }
        
        button {
            background: #ff9a3c;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 20px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            touch-action: manipulation;
            min-height: 44px;
            margin: 10px 0;
        }
        
        button:active {
            transform: scale(0.98);
            background: #ff8a2c;
        }
        
        /* è¶…å°å±å¹•é€‚é… */
        @media (max-width: 360px) {
            .container {
                padding: 15px 12px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .greeting {
                font-size: 1.1rem;
            }
            
            .blind-dumpling {
                width: 60px;
                height: 60px;
                font-size: 1.8rem;
            }
            
            .blind-dumpling::before {
                font-size: 1.6rem;
            }
            
            .big-heart-container {
                width: 180px;
                height: 180px;
            }
            
            .small-heart {
                font-size: 1.6rem;
            }
        }
        
        /* æ¨ªå±é€‚é… */
        @media (max-height: 500px) and (orientation: landscape) {
            .container {
                padding: 15px;
                margin-top: 5px;
            }
            
            .header {
                margin-bottom: 10px;
            }
            
            h1 {
                font-size: 1.6rem;
                margin-bottom: 8px;
            }
            
            .current-option {
                margin: 15px 0;
                min-height: 180px;
            }
            
            .blind-dumplings {
                gap: 10px;
            }
            
            .blind-dumpling {
                width: 50px;
                height: 50px;
                font-size: 1.6rem;
            }
        }
        
        /* é˜²æ­¢æ–‡æœ¬é€‰æ‹© */
        .no-select {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
    </style>
</head>
<body class="no-select">
    <div class="container">
        <div class="header">
            <h1>â„ï¸ å•¦å•¦å•¦~ç«‹å†¬å¿«ä¹å“¦ï¼Œæˆ‘æƒ³æ¸©æš–ä½ çš„æ•´ä¸ªå†¬å¤©ğŸ¥° â„ï¸</h1>
            <p class="greeting">å—¨ï¼Œæ†¨è±†è±†ğŸ„ğŸ™Œå‡†å¤‡å¥½æ¥æ”¶æ¸©æš–å’Œæ¬¢ä¹äº†å—ğŸ˜</p>
            <p class="subtitle">ä¸“ä¸ºä½ è®¾è®¡çš„ç«‹å†¬æƒŠå–œï¼Œä¿è¯è®©ä½ ç¬‘å‡ºå£°ğŸ˜‰ğŸ˜‰</p>
        </div>
        
        <div class="progress-bar">
            <div class="progress" id="progress"></div>
        </div>
        
        <div class="current-option" id="current-option">
            <!-- è¿™é‡Œä¼šåŠ¨æ€æ˜¾ç¤ºå½“å‰é€‰é¡¹ -->
        </div>
        
        <div class="big-heart-container" id="big-heart-container">
            <!-- å°å¿ƒå¿ƒä¼šé€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
        </div>
        
        <div class="final-message" id="final-message"></div>
        
        <div class="footer">
            <p>è¿™ä¸ªå†¬å¤©ï¼Œæœ‰ä½ æ ¼å¤–æ¸©æš–å“¦~ğŸ’– <span class="heart">â¤ï¸</span></p>
            <p>â€”â€” æ¥è‡ªæƒ³é€—ä½ å¼€å¿ƒçš„è°ƒçš®æ£è›‹å°ç›†å‹ğŸ˜ğŸ˜</p>
        </div>
    </div>
    
    <div class="letter-container" id="letter-container">
        <div class="close-letter" id="close-letter">Ã—</div>
        <div class="letter-content" id="letter-content">
            <!-- ä¿¡ä»¶å†…å®¹ä¼šé€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
        </div>
    </div>

    <script>
        // æ¸¸æˆçŠ¶æ€
        let currentStep = 0;
        const totalSteps = 3;
        let selectedDumplings = [];
        
        // é¥ºå­æ•°æ® - æ¯ä¸ªé¥ºå­åªæœ‰ä¸€è¡Œç¥ç¦è¯­
        const dumplings = [
            { 
                icon: 'ğŸ¥Ÿ', 
                name: 'éŸ­èœé¸¡è›‹', 
                message: 'éŸ­èœé¸¡è›‹é¥ºå­ï¼åƒäº†å®ƒï¼Œä¿è¯ä½ æ¯”éŸ­èœè¿˜ç²¾ç¥å“ˆå“ˆå“ˆğŸ˜‹ğŸ˜‹',
                color: '#ff6b6b'
            },
            { 
                icon: 'ğŸ¥Ÿ', 
                name: 'ç¾Šè‚‰é¥ºå­', 
                message: 'ç¾Šè‚‰é¥ºå­ï¼æš–èº«åˆæš–å¿ƒï¼Œåƒäº†å®ƒå†¬å¤©ä¸æ€•å†·ï¼Œè¶…çº§æš–æš–å“’~ğŸ˜‰ğŸ˜‰ ',
                color: '#ff9a3c'
            },
            { 
                icon: 'ğŸ¥Ÿ', 
                name: 'ç‰›è‚‰é¥ºå­', 
                message: 'ç‰›è‚‰é¥ºå­ï¼è¡¥å……èƒ½é‡ï¼Œåƒäº†å®ƒä½ èƒ½ä¸¾èµ·ä¸€å¤´ç‰›ï¼Œå“‡å“¦ğŸ¤©ğŸ¤©',
                color: '#06d6a0'
            },
            { 
                icon: 'ğŸ¥Ÿ', 
                name: 'ç´ é¥ºå­', 
                message: 'ç´ é¥ºå­ï¼å¥åº·ç¾å‘³ï¼Œåƒäº†å®ƒä½ ä¼šå˜å¾—è¶…çº§æ— æ•Œå¼ºğŸ’•ğŸ’• ',
                color: '#118ab2'
            },
            { 
                icon: 'ğŸ¥Ÿ', 
                name: 'å¹¸è¿é¥ºå­', 
                message: 'å¹¸è¿é¥ºå­ï¼æ­å–œä½ ï¼Œåƒäº†å®ƒå¹¸ç¦å¥½è¿ï¼Œå¹³å®‰å–œä¹å¤©å¤©å›´ç»•ç€ä½ è½¬åœˆåœˆğŸ’–ğŸ’– ',
                color: '#7209b7'
            }
        ];
        
        // æ¸©æš–å¹½é»˜æ¶ˆæ¯
        const warmMessages = [
            "æ†¨è±†ğŸ„ ä½ ç¬‘èµ·æ¥çœŸæš–å¿ƒï¼",
            "è¿™ä¸ªå†¬å¤©æœ‰ä½ æ ¼å¤–æ¸©æš–ï¼",
            "æ„¿ä½ æ¯å¤©éƒ½æœ‰å¥½å¿ƒæƒ…ï¼",
            "ä½ æ˜¯æˆ‘å†¬å¤©é‡Œçš„å°å¤ªé˜³ï¼",
            "å¤šç¬‘ç¬‘ï¼Œç”Ÿæ´»æ›´ç¾å¥½ï¼",
            "ä½ æ¸©æš–äº†æ•´ä¸ªå†¬å¤©ï¼",
            "ä¿æŒå¾®ç¬‘ï¼Œä½ å°±æ˜¯æœ€å¸…æœ€å¸…å“’ï¼",
            "æ„¿ä½ è¢«ä¸–ç•Œæ¸©æŸ”ä»¥å¾…ï¼",
            "æ¯ä¸€å¤©éƒ½å› ä½ è€Œç¾å¥½ï¼",
            "ä½ å€¼å¾—æ‰€æœ‰çš„ç¾å¥½ï¼",
            "å†¬å¤©å†·ï¼Œä½†ä½ å¾ˆæš–ï¼",
            "ä½ çš„ç¬‘å®¹èƒ½èåŒ–å†°é›ªï¼",
            "æ„¿ä½ å†¬å¤©å¿«ä¹æ¯ä¸€å¤©ï¼",
            "ä½ æ˜¯æœ€ç‰¹åˆ«çš„ï¼",
            "ç«‹å†¬å¿«ä¹ï¼Œæ¸©æš–ç›¸ä¼´ï¼",
            "æ†¨è±†è±†æœ€å¯çˆ±ï¼",
            "ä½ çš„ç¬‘å£°æ˜¯æœ€å¥½å¬çš„éŸ³ä¹ï¼",
            "ä»Šå¤©ä¹Ÿè¦å¼€å¿ƒå“¦ï¼",
            "ä½ ç¬‘èµ·æ¥çš„æ ·å­çœŸè¿·äººï¼"
        ];
        
        // è¶£å‘³é—®é¢˜ - æ²¡æœ‰æ ‡å‡†ç­”æ¡ˆï¼Œæ¯ä¸ªé€‰é¡¹éƒ½æœ‰è¶£
        const quizQuestions = [
            {
                question: "ç«‹å†¬è¿™å¤©ï¼Œæ†¨è±†è±†æœ€é€‚åˆåšä»€ä¹ˆï¼Ÿ",
                options: [
                    "çªåœ¨è¢«å­é‡Œå½“å°æ‡’è™«",
                    "åƒçƒ­æ°”è…¾è…¾çš„é¥ºå­å¤§é¤ğŸ¥Ÿ",
                    "å‡ºé—¨å †ä¸ªå¯çˆ±çš„é›ªäººâ›„",
                    "æ¥æ”¶æˆ‘çš„æ¸©æš–ç¥ç¦ğŸ’•"
                ],
                responses: [
                    "å“ˆå“ˆï¼Œå¯ä»¥åšæ¢¦å“¦~å› ä¸ºä½ ä»Šå¤©è¦å·¥ä½œğŸ˜„ğŸ˜„",
                    "å•¦å•¦å•¦~å·²ç»å®ç°äº‘åƒé¥ºå­å•¦~æˆ‘ç»™ä½ å‡†å¤‡çš„é¦…æ€ä¹ˆæ ·å‘€ğŸ˜ğŸ˜",
                    "å †é›ªäººè®°å¾—å¸¦ä¸Šæˆ‘å“¦~ğŸ¤—ğŸ¤—",
                    "å¤©å¤©é™ªç€ä½ ğŸ¥°ğŸ¥°"
                ]
            },
            {
                question: "å¦‚æœæ†¨è±†è±†æ˜¯å†¬å¤©çš„ç¾é£Ÿï¼Œä¼šæ˜¯ä»€ä¹ˆï¼Ÿ",
                options: [
                    "çƒ­ä¹ä¹çš„ç«é”…",
                    "ç”œç”œçš„ç³–è‘«èŠ¦",
                    "é¦™å–·å–·çš„çƒ¤çº¢è–¯", 
                    "æš–æš–çš„å§œèŒ¶"
                ],
                responses: [
                    "ç«é”…æœ€çƒ­é—¹ï¼Œä½ æƒ³æƒ³åƒä»€ä¹ˆå¥½å‘¢ï¼",
                    "ç³–è‘«èŠ¦ç”œç”œèœœèœœï¼Œå•¦å•¦å•¦åˆ†æ³Œå¿«ä¹çš„å¤šå·´èƒº",
                    "çƒ¤çº¢è–¯æš–å¿ƒæš–èƒƒï¼Œä¸è®©ä½ é¥¿ç€å•¦~",
                    "å§œèŒ¶é©±å¯’æš–å¿ƒï¼Œå¥½é€‚åˆå†¬å¤©çš„ä½ å“¦~"
                ]
            },
            {
                question: "æ†¨è±†è±†å†¬å¤©æœ€éœ€è¦ä»€ä¹ˆï¼Ÿ",
                options: [
                    "åšåšçš„ç¾½ç»’æœ",
                    "æš–æš–çš„å›´å·¾æ‰‹å¥—",
                    "çƒ­ä¹ä¹çš„èŒ¶",
                    "æˆ‘çš„æš–å¿ƒé™ªä¼´"
                ],
                responses: [
                    "ç¾½ç»’æœä¿æš–ï¼Œä½†ä¸å¦‚æˆ‘çš„ç¥ç¦æš–ï¼",
                    "å›´å·¾æ‰‹å¥—å¾ˆå®ç”¨ï¼Œä½†æˆ‘çš„å…³å¿ƒæ›´è´´å¿ƒï¼",
                    "èŒ¶æš–æ‰‹ï¼Œæˆ‘çš„ç¥ç¦æš–å¿ƒï¼",
                    "è¿™ä¸ªé€‰æ‹©æœ€è®©æˆ‘å¼€å¿ƒï¼"
                ]
            }
        ];
        
        // æ›´æ–°è¿›åº¦æ¡
        function updateProgress() {
            const progress = document.getElementById('progress');
            const percentage = (currentStep / totalSteps) * 100;
            progress.style.width = percentage + '%';
        }
        
        // åˆ›å»ºç¥ç¦æ¶ˆæ¯ï¼ˆå•è¡Œæ˜¾ç¤ºï¼‰
        function createBlessingMessage(text, color) {
            const message = document.createElement('div');
            message.className = 'blessing-message';
            message.textContent = text;
            
            // éšæœºä½ç½®
            const leftPosition = Math.random() * 70 + 15;
            
            message.style.left = leftPosition + '%';
            message.style.top = '80vh';
            message.style.animationDuration = '6s';
            message.style.color = color;
            message.style.fontWeight = 'bold';
            message.style.background = `rgba(255, 255, 255, 0.9)`;
            message.style.border = `2px solid ${color}`;
            
            document.body.appendChild(message);
            
            setTimeout(() => {
                if (message.parentNode) {
                    message.parentNode.removeChild(message);
                }
            }, 6000);
        }
        
        // è·å–éšæœºé¢œè‰²
        function getRandomColor() {
            const colors = ['#ff6b6b', '#ff9a3c', '#ffd166', '#06d6a0', '#118ab2', '#ef476f', '#7209b7', '#3a86ff'];
            return colors[Math.floor(Math.random() * colors.length)];
        }
        
        // åˆ›å»ºçˆ†ç‚¸æ•ˆæœ
        function createExplosion(x, y) {
            const explosion = document.createElement('div');
            explosion.className = 'explosion';
            explosion.innerHTML = 'ğŸ’¥';
            explosion.style.left = x + 'px';
            explosion.style.top = y + 'px';
            explosion.style.color = getRandomColor();
            
            document.body.appendChild(explosion);
            
            setTimeout(() => {
                if (explosion.parentNode) {
                    explosion.parentNode.removeChild(explosion);
                }
            }, 1500);
        }
        
        // åˆ›å»ºé›ªèŠ±ï¼ˆæ»¡å±é£˜åŠ¨ï¼‰
        function createSnowflake() {
            const snowflake = document.createElement('div');
            snowflake.className = 'snowflake';
            snowflake.innerHTML = 'â„';
            snowflake.style.left = Math.random() * 100 + 'vw';
            snowflake.style.fontSize = (Math.random() * 15 + 12) + 'px';
            snowflake.style.opacity = Math.random() * 0.7 + 0.3;
            snowflake.style.animationDuration = (Math.random() * 5 + 5) + 's';
            snowflake.style.color = `rgba(179, 224, 255, ${Math.random() * 0.5 + 0.5})`;
            
            document.body.appendChild(snowflake);
            
            setTimeout(() => {
                if (snowflake.parentNode) {
                    snowflake.parentNode.removeChild(snowflake);
                }
            }, 10000);
        }
        
        // åˆ›å»ºæ¸©æš–æ¶ˆæ¯ï¼ˆæ»¡å±é£˜åŠ¨ï¼‰
        function createWarmMessage() {
            const message = document.createElement('div');
            message.className = 'warm-message';
            message.textContent = warmMessages[Math.floor(Math.random() * warmMessages.length)];
            message.style.left = Math.random() * 80 + 10 + '%';
            message.style.top = Math.random() * 80 + 10 + '%';
            message.style.animationDuration = (Math.random() * 8 + 8) + 's';
            message.style.color = getRandomColor();
            message.style.fontSize = (Math.random() * 0.3 + 1.4) + 'rem';
            
            document.body.appendChild(message);
            
            setTimeout(() => {
                if (message.parentNode) {
                    message.parentNode.removeChild(message);
                }
            }, 12000);
        }
        
        // åˆ›å»ºå°å¿ƒå¿ƒç»„æˆçš„å¤§çˆ±å¿ƒ
        function createBigHeart() {
            const container = document.getElementById('big-heart-container');
            container.style.display = 'block';
            container.innerHTML = '';
            
            // å¿ƒå½¢åæ ‡ç®—æ³•
            const heartPoints = [];
            const numPoints = 60;
            
            for (let i = 0; i < numPoints; i++) {
                const t = i / numPoints * 2 * Math.PI;
                const x = 16 * Math.pow(Math.sin(t), 3);
                const y = 13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t);
                
                heartPoints.push({
                    x: (x + 16) / 32 * 200,
                    y: (-y + 13) / 26 * 200
                });
            }
            
            // åˆ›å»ºå°å¿ƒå¿ƒ
            heartPoints.forEach((point, index) => {
                setTimeout(() => {
                    const heart = document.createElement('div');
                    heart.className = 'small-heart';
                    heart.innerHTML = 'â¤';
                    heart.style.left = point.x + 'px';
                    heart.style.top = point.y + 'px';
                    heart.style.animationDelay = (index * 0.03) + 's';
                    heart.style.color = '#ff0000';
                    
                    container.appendChild(heart);
                    
                    if (index === numPoints - 1) {
                        setTimeout(showLetter, 500);
                    }
                }, index * 30);
            });
        }
        
        // æ˜¾ç¤ºä¿¡ä»¶
        function showLetter() {
            const letterContainer = document.getElementById('letter-container');
            const letterContent = document.getElementById('letter-content');
            
            letterContent.innerHTML = `
                 <p>å—¨ï¼Œæ†¨è±†è±†ğŸ„ï¼š</p>
                <p style="margin-top:12px;">å¸Œæœ›è¿™ä¸ªå°ç©æ„èƒ½ç»™ä½ å¸¦æ¥ä¸€äº›æ¸©æš–å’Œæ¬¢ä¹ğŸ¤—ğŸ¤—</p>
                <p style="margin-top:12px;">æ¯å½“å¬åˆ°ä½ ç¬‘ï¼Œæˆ‘çš„å¿ƒé‡Œå°±åƒè¿™æ»¡å±çš„çˆ±å¿ƒä¸€æ ·ï¼Œå……æ»¡äº†æ¸©ğŸ¥°ğŸ¥°ã€‚</p>
                <p style="margin-top:12px;">ä½ æ˜¯ä¸€ä¸ªç‰¹åˆ«çš„äººï¼Œæ€»æ˜¯èƒ½è®©æˆ‘æƒ³ğŸ¤©ğŸ¤©</p>
                <p style="margin-top:12px;">æ„¿è¿™ä¸ªå†¬å¤©ï¼Œæˆ‘çš„ç¥ç¦èƒ½åƒè¿™äº›è·³åŠ¨çš„å¿ƒä¸€æ ·ï¼Œ</p>
                <p>ä¸€ç›´é™ªä¼´ç€ä½ ï¼Œæ¸©æš–ä½ çš„æ¯ä¸€å¤©ğŸ™ŒğŸ™Œã€‚</p>
                <p style="margin-top:12px;">è®°ä½ï¼Œæ— è®ºä»€ä¹ˆæ—¶å€™ï¼Œä½ åœ¨æˆ‘å¿ƒä¸­éƒ½æ˜¯æœ€æ£’æœ€æ£’çš„ï¼</p>
                <p>ä½ æ˜¯æˆ‘å¿ƒé‡Œæœ€å‰å®³çš„äººï¼Œæ°¸è¿œéƒ½ç«™åœ¨ä½ è¿™è¾¹æ”¯æŒä½ ğŸ˜ğŸ˜</p>
                <p style="margin-top:12px;">æ„¿ä½ æ•´ä¸ªå†¬å¤©éƒ½æ¸©æš–ã€å¹¸è¿ã€å¦‚æ„¿ä»¥å¿ï¼</p>
                <div class="letter-signature">
                    <p>æˆ‘ä¼šæ°¸è¿œé™ªç€ä½ çš„å“¦~ğŸ’–ğŸ’–</p>
                    <p>${new Date().getFullYear()}å¹´ç«‹å†¬</p>
                </div>
            `;
            
            letterContainer.style.display = 'block';
            
            // æ·»åŠ å…³é—­ä¿¡ä»¶çš„äº‹ä»¶
            document.getElementById('close-letter').addEventListener('click', function() {
                letterContainer.style.display = 'none';
            });
            
            // ç‚¹å‡»èƒŒæ™¯ä¹Ÿå¯ä»¥å…³é—­
            letterContainer.addEventListener('click', function(e) {
                if (e.target === this) {
                    this.style.display = 'none';
                }
            });
        }
        
        // æ˜¾ç¤ºç›²ç›’é¥ºå­
        function showBlindDumplings() {
            const currentOption = document.getElementById('current-option');
            currentOption.innerHTML = `
                <h2 style="color:#ff6b6b; margin-bottom:15px; font-size:1.4rem;">ğŸ¥Ÿ ç¬¬ä¸€æ­¥ï¼šæƒŠå–œé¥ºå­ç›²ç›’</h2>
                <p style="margin-bottom:12px; font-size:1rem;">ç«‹å†¬ä¸åƒé¥ºï¼Œå†»æ‰è€³æœµæ²¡äººç®¡ï¼</p>
                <p style="margin-bottom:12px; font-size:1rem;">é€‰3ä¸ªé¥ºå­ï¼Œçœ‹çœ‹æœ‰ä»€ä¹ˆæƒŠå–œç­‰ç€ä½ ~</p>
                <div class="blind-dumplings">
                    ${dumplings.map((_, index) => `
                        <div class="blind-dumpling" data-index="${index}"></div>
                    `).join('')}
                </div>
                <div style="margin-top:15px; font-size:1rem; color:#666;">
                    å·²é€‰æ‹©: ${selectedDumplings.length}/3
                </div>
                <div class="funny-message">é€‰ä¸€ä¸ªå§ï¼Œä¿è¯è®©ä½ ç¬‘å‡ºå£°ï¼</div>
            `;
            
            // æ·»åŠ ç›²ç›’ç‚¹å‡»äº‹ä»¶
            document.querySelectorAll('.blind-dumpling').forEach(dumpling => {
                dumpling.addEventListener('click', function() {
                    if (this.classList.contains('opened')) return;
                    
                    const index = parseInt(this.getAttribute('data-index'));
                    const selectedDumpling = dumplings[index];
                    
                    // æ ‡è®°ä¸ºå·²æ‰“å¼€
                    this.classList.add('opened');
                    this.innerHTML = selectedDumpling.icon;
                    
                    // æ·»åŠ åˆ°å·²é€‰æ‹©åˆ—è¡¨
                    selectedDumplings.push(selectedDumpling);
                    
                    // æ˜¾ç¤ºå•è¡Œç¥ç¦æ¶ˆæ¯
                    createBlessingMessage(
                        selectedDumpling.message,
                        selectedDumpling.color
                    );
                    
                    // æ›´æ–°é€‰æ‹©è®¡æ•°
                    document.querySelector('.blind-dumplings + div').textContent = 
                        `å·²é€‰æ‹©: ${selectedDumplings.length}/3`;
                    
                    // å¦‚æœé€‰æ‹©äº†3ä¸ªï¼Œè¿›å…¥ä¸‹ä¸€æ­¥
                    if (selectedDumplings.length === 3) {
                        setTimeout(showSelectedDumplings, 2000);
                    }
                });
            });
        }
        
        // æ˜¾ç¤ºå·²é€‰æ‹©çš„é¥ºå­
        function showSelectedDumplings() {
            const currentOption = document.getElementById('current-option');
            currentOption.innerHTML = `
                <h2 style="color:#ff6b6b; margin-bottom:15px; font-size:1.4rem;">ğŸ‰ é¥ºå­é€‰æ‹©å®Œæˆï¼</h2>
                <p style="margin-bottom:12px; font-size:1rem;">ä½ é€‰æ‹©äº†è¿™äº›ç¾å‘³çš„é¥ºå­ï¼š</p>
                <div class="selected-dumplings">
                    ${selectedDumplings.map(dumpling => `
                        <div class="selected-dumpling">
                            <div class="selected-dumpling-icon">${dumpling.icon}</div>
                            <div class="selected-dumpling-name">${dumpling.name}</div>
                        </div>
                    `).join('')}
                </div>
                <div class="funny-message">åƒé¥±äº†å—ï¼Ÿç°åœ¨æ¥ç©ä¸ªè¶£å‘³é—®ç­”å§ï¼</div>
                <button id="next-to-bomb">
                    ä¸‹ä¸€æ­¥ï¼šè¶£å‘³é—®ç­” ğŸ’­
                </button>
            `;
            
            document.getElementById('next-to-bomb').addEventListener('click', function() {
                currentStep = 1;
                updateProgress();
                showFunQuiz();
            });
        }
        
        // æ˜¾ç¤ºè¶£å‘³é—®ç­”
        function showFunQuiz() {
            const currentOption = document.getElementById('current-option');
            currentOption.innerHTML = `
                <h2 style="color:#ff9a3c; margin-bottom:15px; font-size:1.4rem;">ğŸ’­ ç¬¬äºŒæ­¥ï¼šè¶£å‘³é—®ç­”</h2>
                <p style="margin-bottom:12px; font-size:1rem;">é€‰ä½ å–œæ¬¢çš„ç­”æ¡ˆï¼Œæ¯ä¸ªé€‰æ‹©éƒ½æœ‰æƒŠå–œï¼</p>
                <div class="quiz-container">
                    <div class="quiz-question" id="quiz-question">${quizQuestions[0].question}</div>
                    <div class="quiz-options" id="quiz-options">
                        ${quizQuestions[0].options.map((option, index) => `
                            <div class="quiz-option" data-index="${index}">${option}</div>
                        `).join('')}
                    </div>
                </div>
                <div style="margin-top:15px; font-size:1rem; color:#666;" id="quiz-progress">
                    é—®é¢˜ 1/3
                </div>
                <div class="funny-message" id="funny-response"></div>
            `;
            
            let currentQuestion = 0;
            
            // æ·»åŠ é€‰é¡¹ç‚¹å‡»äº‹ä»¶
            document.querySelectorAll('.quiz-option').forEach(option => {
                option.addEventListener('click', function() {
                    const selectedIndex = parseInt(this.getAttribute('data-index'));
                    
                    // æ˜¾ç¤ºå¯¹åº”çš„è¶£å‘³å›åº”
                    document.getElementById('funny-response').textContent = 
                        quizQuestions[currentQuestion].responses[selectedIndex];
                    
                    // ç»™é€‰ä¸­çš„é€‰é¡¹æ·»åŠ æ•ˆæœ
                    this.style.background = '#c8f7c5';
                    this.style.borderColor = '#06d6a0';
                    
                    // ç¦ç”¨æ‰€æœ‰é€‰é¡¹
                    document.querySelectorAll('.quiz-option').forEach(opt => {
                        opt.style.pointerEvents = 'none';
                    });
                    
                    // è¿›å…¥ä¸‹ä¸€é¢˜æˆ–ç»“æŸ
                    setTimeout(() => {
                        currentQuestion++;
                        if (currentQuestion < quizQuestions.length) {
                            updateQuizQuestion(currentQuestion);
                        } else {
                            showBombExplosion();
                        }
                    }, 2000);
                });
            });
            
            function updateQuizQuestion(questionIndex) {
                document.getElementById('quiz-question').textContent = 
                    quizQuestions[questionIndex].question;
                
                document.getElementById('quiz-options').innerHTML = 
                    quizQuestions[questionIndex].options.map((option, index) => `
                        <div class="quiz-option" data-index="${index}">${option}</div>
                    `).join('');
                
                document.getElementById('quiz-progress').textContent = 
                    `é—®é¢˜ ${questionIndex + 1}/3`;
                
                document.getElementById('funny-response').textContent = '';
                
                // é‡æ–°æ·»åŠ äº‹ä»¶ç›‘å¬
                document.querySelectorAll('.quiz-option').forEach(option => {
                    option.addEventListener('click', function() {
                        const selectedIndex = parseInt(this.getAttribute('data-index'));
                        
                        document.getElementById('funny-response').textContent = 
                            quizQuestions[questionIndex].responses[selectedIndex];
                        
                        this.style.background = '#c8f7c5';
                        this.style.borderColor = '#06d6a0';
                        
                        document.querySelectorAll('.quiz-option').forEach(opt => {
                            opt.style.pointerEvents = 'none';
                        });
                        
                        setTimeout(() => {
                            currentQuestion++;
                            if (currentQuestion < quizQuestions.length) {
                                updateQuizQuestion(currentQuestion);
                            } else {
                                showBombExplosion();
                            }
                        }, 2000);
                    });
                });
            }
        }
        
        // æ˜¾ç¤ºåº†ç¥æ•ˆæœ
        function showBombExplosion() {
            const currentOption = document.getElementById('current-option');
            currentOption.innerHTML = `
                <h2 style="color:#ff9a3c; margin-bottom:15px; font-size:1.4rem;">ğŸ‰ é—®ç­”å®Œæˆï¼</h2>
                <p style="margin-bottom:12px; font-size:1rem;">ä½ çš„é€‰æ‹©éƒ½å¤ªæœ‰è¶£äº†ï¼</p>
                <div style="font-size:3rem; margin:15px 0;">âœ¨</div>
                <div class="funny-message">å‡†å¤‡æ¥æ”¶æœ€åçš„æ¸©æš–å§ï¼</div>
            `;
            
            // åˆ›å»ºåº†ç¥æ•ˆæœ
            for (let i = 0; i < 15; i++) {
                setTimeout(() => {
                    const x = Math.random() * window.innerWidth;
                    const y = Math.random() * window.innerHeight;
                    createExplosion(x, y);
                }, i * 150);
            }
            
            // è¿›å…¥ä¸‹ä¸€æ­¥
            setTimeout(() => {
                currentStep = 2;
                updateProgress();
                showSun();
            }, 3000);
        }
        
        // æ˜¾ç¤ºå¤ªé˜³é€‰é¡¹
        function showSun() {
            const currentOption = document.getElementById('current-option');
            currentOption.innerHTML = `
                <h2 style="color:#ffd166; margin-bottom:15px; font-size:1.4rem;">â˜€ï¸ ç¬¬ä¸‰æ­¥ï¼šæ”¶é›†æ¸©æš–</h2>
                <p style="margin-bottom:12px; font-size:1rem;">ç‚¹å‡»å¤ªé˜³æ”¶é›†æ¸©æš–èƒ½é‡ï¼Œæ¸©æš–æ•´ä¸ªå†¬å¤©ï¼</p>
                <div style="font-size:4.5rem; cursor:pointer; margin:15px 0; transition: all 0.3s ease;" id="sun-icon">â˜€ï¸</div>
                <div style="font-size:1.3rem; color:#ff9a3c; margin:12px 0;" id="energy-counter">æ¸©æš–èƒ½é‡: 0%</div>
                <div class="funny-message">å¤šç‚¹å‡ ä¸‹ï¼Œè®©æ¸©æš–å……æ»¡æ•´ä¸ªå±å¹•ï¼</div>
                <button id="complete-game" style="background:#ffd166; color:#333; display:none;">
                    å®Œæˆæ”¶é›†
                </button>
            `;
            
            // æ”¹å˜èƒŒæ™¯ä¸ºæ›´æ¸©æš–çš„è‰²è°ƒ
            document.body.style.background = 'linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%)';
            
            // æ·»åŠ å¤ªé˜³ç‚¹å‡»äº‹ä»¶
            let energy = 0;
            const sunIcon = document.getElementById('sun-icon');
            const energyCounter = document.getElementById('energy-counter');
            const completeButton = document.getElementById('complete-game');
            
            sunIcon.addEventListener('click', function() {
                if (energy < 100) {
                    energy += 10;
                    energyCounter.textContent = `æ¸©æš–èƒ½é‡: ${energy}%`;
                    
                    // å¤ªé˜³å›¾æ ‡åŠ¨ç”»
                    sunIcon.style.transform = `scale(${1 + energy/100})`;
                    sunIcon.style.color = energy >= 50 ? '#ff9f43' : '#ffd166';
                    
                    // æ¯æ¬¡ç‚¹å‡»åˆ›å»ºæ¸©æš–æ¶ˆæ¯
                    createWarmMessage();
                    
                    if (energy >= 100) {
                        completeButton.style.display = 'inline-block';
                        document.querySelector('.funny-message').textContent = "å¤ªæ£’äº†ï¼æ¸©æš–èƒ½é‡æ»¡æ ¼ï¼";
                    }
                }
            });
            
            completeButton.addEventListener('click', function() {
                // å®Œæˆæ‰€æœ‰æ­¥éª¤
                currentStep = 3;
                updateProgress();
                showFinalMessage();
            });
        }
        
        // æ˜¾ç¤ºæœ€ç»ˆæ¶ˆæ¯
        function showFinalMessage() {
            const currentOption = document.getElementById('current-option');
            currentOption.innerHTML = '';
            
            // åˆ›å»ºå°å¿ƒå¿ƒç»„æˆçš„å¤§çˆ±å¿ƒ
            createBigHeart();
                        
            // å¢åŠ é›ªèŠ±å¯†åº¦ - æ»¡å±é£˜åŠ¨
            setInterval(createSnowflake, 100);
            
            // åˆ›å»ºéšæœºæ¸©æš–æ¶ˆæ¯ - æ»¡å±é£˜åŠ¨
            setInterval(createWarmMessage, 1500);
        }
        
        // åˆå§‹åŒ–æ¸¸æˆ
        function initGame() {
            showBlindDumplings();
            
            // åˆ›å»ºåˆå§‹é›ªèŠ±
            setInterval(createSnowflake, 500);
        }
        
        // å¯åŠ¨æ¸¸æˆ
        initGame();
    </script>
</body>
</html>